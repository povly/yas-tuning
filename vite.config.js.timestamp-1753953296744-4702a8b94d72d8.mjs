// vite.config.js
import { defineConfig } from "file:///D:/server/2025/laragon/www/yas-tuning/node_modules/vite/dist/node/index.js";
import pug from "file:///D:/server/2025/laragon/www/yas-tuning/node_modules/vite-plugin-pug/dist/index.js";
import autoprefixer from "file:///D:/server/2025/laragon/www/yas-tuning/node_modules/autoprefixer/lib/autoprefixer.js";
import { ViteImageOptimizer } from "file:///D:/server/2025/laragon/www/yas-tuning/node_modules/vite-plugin-image-optimizer/dist/index.mjs";
import { resolve } from "path";
import { readdirSync, existsSync, copyFileSync, unlinkSync, rmSync } from "fs";
import process from "process";
import commonjs from "file:///D:/server/2025/laragon/www/yas-tuning/node_modules/@rollup/plugin-commonjs/dist/es/index.js";
function getHTMLPages() {
  const htmlDir = "src/html";
  const pages = {};
  if (existsSync(htmlDir)) {
    const htmlFiles = readdirSync(htmlDir).filter(
      (file) => file.endsWith(".html")
    );
    htmlFiles.forEach((file) => {
      const pageName = file.replace(".html", "");
      const htmlPath = resolve(process.cwd(), `${htmlDir}/${file}`);
      pages[pageName] = htmlPath;
    });
  }
  return pages;
}
function getJSEntries() {
  const entries = {};
  const jsDir = "src/js";
  if (existsSync(jsDir)) {
    const jsFiles = readdirSync(jsDir).filter((file) => file.endsWith(".js"));
    jsFiles.forEach((file) => {
      const name = file.replace(".js", "");
      entries[`js/${name}`] = resolve(process.cwd(), `${jsDir}/${file}`);
    });
  }
  const libsDir = "src/js/libs";
  if (existsSync(libsDir)) {
    const libFiles = readdirSync(libsDir).filter(
      (file) => file.endsWith(".js")
    );
    libFiles.forEach((file) => {
      const name = file.replace(".js", "");
      entries[`libs/${name}`] = resolve(process.cwd(), `${libsDir}/${file}`);
    });
  }
  const pagesDir = "src/js/pages";
  if (existsSync(pagesDir)) {
    let scanDir = function(dir, baseEntry = "") {
      const items = readdirSync(dir, { withFileTypes: true });
      items.forEach((item) => {
        if (item.isDirectory()) {
          scanDir(`${dir}/${item.name}`, `${baseEntry}${item.name}/`);
        } else if (item.name.endsWith(".js")) {
          const name = item.name.replace(".js", "");
          entries[`pages/${baseEntry}${name}`] = resolve(
            process.cwd(),
            `${dir}/${item.name}`
          );
        }
      });
    };
    scanDir(pagesDir);
  }
  return entries;
}
function getSCSSEntries() {
  const entries = {};
  if (existsSync("src/scss/main.scss")) {
    entries["css/main"] = resolve(process.cwd(), "src/scss/main.scss");
  }
  const pagesDir = "src/scss/pages";
  if (existsSync(pagesDir)) {
    const scssFiles = readdirSync(pagesDir).filter(
      (file) => file.endsWith(".scss")
    );
    scssFiles.forEach((file) => {
      const name = file.replace(".scss", "");
      entries[`css/${name}`] = resolve(process.cwd(), `${pagesDir}/${file}`);
    });
  }
  const libsDir = "src/scss/libs";
  if (existsSync(libsDir)) {
    const libFiles = readdirSync(libsDir).filter(
      (file) => file.endsWith(".scss")
    );
    libFiles.forEach((file) => {
      const name = file.replace(".scss", "");
      entries[`css/libs/${name}`] = resolve(
        process.cwd(),
        `${libsDir}/${file}`
      );
    });
  }
  const blocksDir = "src/scss/blocks";
  if (existsSync(blocksDir)) {
    let scanBlocksDir = function(dir, baseEntry = "") {
      const items = readdirSync(dir, { withFileTypes: true });
      items.forEach((item) => {
        if (item.isDirectory()) {
          scanBlocksDir(`${dir}/${item.name}`, `${baseEntry}${item.name}/`);
        } else if (item.name.endsWith(".scss")) {
          const name = item.name.replace(".scss", "");
          const entryKey = `css/blocks/${baseEntry}${name}`;
          const entryPath = resolve(process.cwd(), `${dir}/${item.name}`);
          entries[entryKey] = entryPath;
        }
      });
    };
    scanBlocksDir(blocksDir);
  }
  return entries;
}
var vite_config_default = defineConfig(({ command, mode }) => {
  const isDev = command === "serve" || mode === "development";
  return {
    plugins: [
      pug(
        {
          pretty: true
        },
        {
          title: "Vite App",
          isDev
        }
      ),
      // Оптимизация изображений в production
      !isDev && ViteImageOptimizer({
        jpg: {
          quality: 90,
          progressive: true
        },
        jpeg: {
          quality: 90,
          progressive: true
        },
        png: {
          quality: 90,
          compressionLevel: 9
        },
        webp: {
          quality: 85,
          effort: 4
        },
        avif: {
          quality: 80,
          effort: 4
        },
        svg: {
          plugins: [
            { name: "removeViewBox", active: false },
            { name: "removeDimensions", active: true },
            { name: "removeComments", active: true },
            { name: "removeUselessStrokeAndFill", active: true }
          ]
        }
      }),
      // Кастомный плагин для перемещения HTML файлов в корень build
      {
        name: "move-html-to-root",
        writeBundle() {
          const buildDir = "build";
          const htmlDir = `${buildDir}/src/html`;
          if (existsSync(htmlDir)) {
            const htmlFiles = readdirSync(htmlDir).filter(
              (file) => file.endsWith(".html")
            );
            htmlFiles.forEach((file) => {
              const srcPath = `${htmlDir}/${file}`;
              const destPath = `${buildDir}/${file}`;
              copyFileSync(srcPath, destPath);
              unlinkSync(srcPath);
            });
            try {
              rmSync(`${buildDir}/src/html`, { recursive: true, force: true });
              rmSync(`${buildDir}/src`, { recursive: true, force: true });
            } catch (e) {
            }
          }
        }
      },
      // Плагин для принудительного сохранения CSS блоков
      {
        name: "preserve-css-blocks",
        generateBundle(options, bundle) {
          const scssEntries = getSCSSEntries();
          Object.keys(scssEntries).forEach((entryKey) => {
            if (entryKey.includes("blocks/")) {
              const expectedCssName = `${entryKey}.css`;
              const hasCorrespondingCss = Object.keys(bundle).some(
                (fileName) => fileName === expectedCssName || fileName.includes(entryKey)
              );
              if (!hasCorrespondingCss) {
                console.warn(`\u26A0\uFE0F  Missing CSS for block entry: ${entryKey}`);
              }
            }
          });
          Object.keys(bundle).forEach((fileName) => {
            const file = bundle[fileName];
            if (file.type === "chunk" && (file.facadeModuleId?.endsWith(".scss") || fileName.includes("css/blocks/") || file.code && file.code.trim().length < 100 && (file.code.includes("import") === false || file.code === ""))) {
              console.log(`\u{1F5D1}\uFE0F  Removing empty CSS JS file: ${fileName}`);
              delete bundle[fileName];
            }
          });
        }
      },
      // assetConverter(),
      commonjs()
    ].filter(Boolean),
    css: {
      preprocessorOptions: {
        scss: {
          api: "modern-compiler",
          silenceDeprecations: ["legacy-js-api"]
        }
      },
      postcss: {
        plugins: !isDev && [autoprefixer()]
      }
    },
    build: {
      target: "es2015",
      cssTarget: "chrome80",
      outDir: "build",
      sourcemap: false,
      rollupOptions: {
        input: {
          ...getHTMLPages(),
          ...getJSEntries(),
          ...getSCSSEntries()
        },
        output: {
          entryFileNames: (chunkInfo) => {
            if (chunkInfo.isEntry && chunkInfo.facadeModuleId?.includes(".html")) {
              return "[name].html";
            }
            if (chunkInfo.name.startsWith("js/")) {
              return "[name].js";
            }
            return "js/[name].js";
          },
          chunkFileNames: "js/[name]-[hash].js",
          assetFileNames: (assetInfo) => {
            if (assetInfo.name?.endsWith(".css")) {
              const scssEntries = getSCSSEntries();
              if (assetInfo.originalFileNames) {
                for (const originalName of assetInfo.originalFileNames) {
                  const normalizedOrig = originalName.replace(/\\/g, "/");
                  for (const [entryKey, entryPath] of Object.entries(
                    scssEntries
                  )) {
                    const normalizedEntry = entryPath.replace(/\\/g, "/");
                    if (normalizedOrig.includes(normalizedEntry) || normalizedEntry.includes(normalizedOrig)) {
                      return `${entryKey}.css`;
                    }
                  }
                }
              }
              for (const [entryKey, entryPath] of Object.entries(scssEntries)) {
                const entryFileName = entryKey.split("/").pop();
                const assetFileName = assetInfo.name.replace(".css", "");
                if (assetFileName === entryFileName) {
                  return `${entryKey}.css`;
                }
              }
              const fileName = assetInfo.name.split("/").pop().replace(/\.[^/.]+$/, "");
              return `css/${fileName}.css`;
            }
            return "assets/[name]-[hash][extname]";
          },
          globals: {
            // Определяем глобальные переменные для избежания конфликтов
          }
        }
      },
      minify: "terser",
      terserOptions: {
        compress: {
          drop_console: true,
          drop_debugger: true,
          pure_funcs: ["console.log", "console.info", "console.debug"]
        },
        mangle: {
          // Безопасный mangling для избежания конфликтов
          reserved: ["$", "jQuery", "window", "document"],
          properties: false
        },
        format: {
          comments: false
        }
      }
    },
    server: {
      port: 3e3,
      open: true
    }
  };
});
export {
  vite_config_default as default
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsidml0ZS5jb25maWcuanMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImNvbnN0IF9fdml0ZV9pbmplY3RlZF9vcmlnaW5hbF9kaXJuYW1lID0gXCJEOlxcXFxzZXJ2ZXJcXFxcMjAyNVxcXFxsYXJhZ29uXFxcXHd3d1xcXFx5YXMtdHVuaW5nXCI7Y29uc3QgX192aXRlX2luamVjdGVkX29yaWdpbmFsX2ZpbGVuYW1lID0gXCJEOlxcXFxzZXJ2ZXJcXFxcMjAyNVxcXFxsYXJhZ29uXFxcXHd3d1xcXFx5YXMtdHVuaW5nXFxcXHZpdGUuY29uZmlnLmpzXCI7Y29uc3QgX192aXRlX2luamVjdGVkX29yaWdpbmFsX2ltcG9ydF9tZXRhX3VybCA9IFwiZmlsZTovLy9EOi9zZXJ2ZXIvMjAyNS9sYXJhZ29uL3d3dy95YXMtdHVuaW5nL3ZpdGUuY29uZmlnLmpzXCI7aW1wb3J0IHsgZGVmaW5lQ29uZmlnIH0gZnJvbSAndml0ZSc7XG5pbXBvcnQgcHVnIGZyb20gJ3ZpdGUtcGx1Z2luLXB1Zyc7XG5pbXBvcnQgYXV0b3ByZWZpeGVyIGZyb20gJ2F1dG9wcmVmaXhlcic7XG5pbXBvcnQgeyBWaXRlSW1hZ2VPcHRpbWl6ZXIgfSBmcm9tICd2aXRlLXBsdWdpbi1pbWFnZS1vcHRpbWl6ZXInO1xuaW1wb3J0IHsgcmVzb2x2ZSB9IGZyb20gJ3BhdGgnO1xuaW1wb3J0IHsgcmVhZGRpclN5bmMsIGV4aXN0c1N5bmMsIGNvcHlGaWxlU3luYywgdW5saW5rU3luYywgcm1TeW5jIH0gZnJvbSAnZnMnO1xuaW1wb3J0IHsgZXhlY1N5bmMgfSBmcm9tICdjaGlsZF9wcm9jZXNzJztcbmltcG9ydCBwcm9jZXNzIGZyb20gJ3Byb2Nlc3MnO1xuaW1wb3J0IGNvbW1vbmpzIGZyb20gJ0Byb2xsdXAvcGx1Z2luLWNvbW1vbmpzJztcblxuLy8gXHUwNDEwXHUwNDMyXHUwNDQyXHUwNDNFXHUwNDNDXHUwNDMwXHUwNDQyXHUwNDM4XHUwNDQ3XHUwNDM1XHUwNDQxXHUwNDNBXHUwNDNFXHUwNDM1IFx1MDQ0MVx1MDQzQVx1MDQzMFx1MDQzRFx1MDQzOFx1MDQ0MFx1MDQzRVx1MDQzMlx1MDQzMFx1MDQzRFx1MDQzOFx1MDQzNSBIVE1MIFx1MDQ0MVx1MDQ0Mlx1MDQ0MFx1MDQzMFx1MDQzRFx1MDQzOFx1MDQ0NiBcdTA0MzIgc3JjL2h0bWxcbmZ1bmN0aW9uIGdldEhUTUxQYWdlcygpIHtcbiAgY29uc3QgaHRtbERpciA9ICdzcmMvaHRtbCc7XG4gIGNvbnN0IHBhZ2VzID0ge307XG5cbiAgaWYgKGV4aXN0c1N5bmMoaHRtbERpcikpIHtcbiAgICBjb25zdCBodG1sRmlsZXMgPSByZWFkZGlyU3luYyhodG1sRGlyKS5maWx0ZXIoKGZpbGUpID0+XG4gICAgICBmaWxlLmVuZHNXaXRoKCcuaHRtbCcpXG4gICAgKTtcblxuICAgIGh0bWxGaWxlcy5mb3JFYWNoKChmaWxlKSA9PiB7XG4gICAgICBjb25zdCBwYWdlTmFtZSA9IGZpbGUucmVwbGFjZSgnLmh0bWwnLCAnJyk7XG4gICAgICBjb25zdCBodG1sUGF0aCA9IHJlc29sdmUocHJvY2Vzcy5jd2QoKSwgYCR7aHRtbERpcn0vJHtmaWxlfWApO1xuICAgICAgLy8gXHUwNDE4XHUwNDQxXHUwNDNGXHUwNDNFXHUwNDNCXHUwNDRDXHUwNDM3XHUwNDQzXHUwNDM1XHUwNDNDIFx1MDQ0Mlx1MDQzRVx1MDQzQlx1MDQ0Q1x1MDQzQVx1MDQzRSBcdTA0MzhcdTA0M0NcdTA0NEYgXHUwNDQ0XHUwNDMwXHUwNDM5XHUwNDNCXHUwNDMwIFx1MDQzQVx1MDQzMFx1MDQzQSBcdTA0M0FcdTA0M0JcdTA0NEVcdTA0NDcsIFx1MDQ0N1x1MDQ0Mlx1MDQzRVx1MDQzMVx1MDQ0QiBcdTA0MzhcdTA0MzdcdTA0MzFcdTA0MzVcdTA0MzZcdTA0MzBcdTA0NDJcdTA0NEMgXHUwNDMyXHUwNDNCXHUwNDNFXHUwNDM2XHUwNDM1XHUwNDNEXHUwNDNEXHUwNDRCXHUwNDQ1IFx1MDQzNFx1MDQzOFx1MDQ0MFx1MDQzNVx1MDQzQVx1MDQ0Mlx1MDQzRVx1MDQ0MFx1MDQzOFx1MDQzOVxuICAgICAgcGFnZXNbcGFnZU5hbWVdID0gaHRtbFBhdGg7XG4gICAgfSk7XG4gIH1cblxuICByZXR1cm4gcGFnZXM7XG59XG5cbi8vIFx1MDQyNFx1MDQ0M1x1MDQzRFx1MDQzQVx1MDQ0Nlx1MDQzOFx1MDQ0RiBcdTA0MzRcdTA0M0JcdTA0NEYgXHUwNDNGXHUwNDNFXHUwNDM4XHUwNDQxXHUwNDNBXHUwNDMwIEpTIFx1MDQ0NFx1MDQzMFx1MDQzOVx1MDQzQlx1MDQzRVx1MDQzMlxuZnVuY3Rpb24gZ2V0SlNFbnRyaWVzKCkge1xuICBjb25zdCBlbnRyaWVzID0ge307XG5cbiAgLy8gXHUwNDFFXHUwNDQxXHUwNDNEXHUwNDNFXHUwNDMyXHUwNDNEXHUwNDRCXHUwNDM1IEpTIFx1MDQ0NFx1MDQzMFx1MDQzOVx1MDQzQlx1MDQ0QlxuICBjb25zdCBqc0RpciA9ICdzcmMvanMnO1xuICBpZiAoZXhpc3RzU3luYyhqc0RpcikpIHtcbiAgICBjb25zdCBqc0ZpbGVzID0gcmVhZGRpclN5bmMoanNEaXIpLmZpbHRlcigoZmlsZSkgPT4gZmlsZS5lbmRzV2l0aCgnLmpzJykpO1xuICAgIGpzRmlsZXMuZm9yRWFjaCgoZmlsZSkgPT4ge1xuICAgICAgY29uc3QgbmFtZSA9IGZpbGUucmVwbGFjZSgnLmpzJywgJycpO1xuICAgICAgZW50cmllc1tganMvJHtuYW1lfWBdID0gcmVzb2x2ZShwcm9jZXNzLmN3ZCgpLCBgJHtqc0Rpcn0vJHtmaWxlfWApO1xuICAgIH0pO1xuICB9XG5cbiAgLy8gXHUwNDExXHUwNDM4XHUwNDMxXHUwNDNCXHUwNDM4XHUwNDNFXHUwNDQyXHUwNDM1XHUwNDNBXHUwNDM4XG4gIGNvbnN0IGxpYnNEaXIgPSAnc3JjL2pzL2xpYnMnO1xuICBpZiAoZXhpc3RzU3luYyhsaWJzRGlyKSkge1xuICAgIGNvbnN0IGxpYkZpbGVzID0gcmVhZGRpclN5bmMobGlic0RpcikuZmlsdGVyKChmaWxlKSA9PlxuICAgICAgZmlsZS5lbmRzV2l0aCgnLmpzJylcbiAgICApO1xuICAgIGxpYkZpbGVzLmZvckVhY2goKGZpbGUpID0+IHtcbiAgICAgIGNvbnN0IG5hbWUgPSBmaWxlLnJlcGxhY2UoJy5qcycsICcnKTtcbiAgICAgIGVudHJpZXNbYGxpYnMvJHtuYW1lfWBdID0gcmVzb2x2ZShwcm9jZXNzLmN3ZCgpLCBgJHtsaWJzRGlyfS8ke2ZpbGV9YCk7XG4gICAgfSk7XG4gIH1cblxuICBjb25zdCBwYWdlc0RpciA9ICdzcmMvanMvcGFnZXMnO1xuICBpZiAoZXhpc3RzU3luYyhwYWdlc0RpcikpIHtcbiAgICBmdW5jdGlvbiBzY2FuRGlyKGRpciwgYmFzZUVudHJ5ID0gJycpIHtcbiAgICAgIGNvbnN0IGl0ZW1zID0gcmVhZGRpclN5bmMoZGlyLCB7IHdpdGhGaWxlVHlwZXM6IHRydWUgfSk7XG4gICAgICBpdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICAgIGlmIChpdGVtLmlzRGlyZWN0b3J5KCkpIHtcbiAgICAgICAgICBzY2FuRGlyKGAke2Rpcn0vJHtpdGVtLm5hbWV9YCwgYCR7YmFzZUVudHJ5fSR7aXRlbS5uYW1lfS9gKTtcbiAgICAgICAgfSBlbHNlIGlmIChpdGVtLm5hbWUuZW5kc1dpdGgoJy5qcycpKSB7XG4gICAgICAgICAgY29uc3QgbmFtZSA9IGl0ZW0ubmFtZS5yZXBsYWNlKCcuanMnLCAnJyk7XG4gICAgICAgICAgZW50cmllc1tgcGFnZXMvJHtiYXNlRW50cnl9JHtuYW1lfWBdID0gcmVzb2x2ZShcbiAgICAgICAgICAgIHByb2Nlc3MuY3dkKCksXG4gICAgICAgICAgICBgJHtkaXJ9LyR7aXRlbS5uYW1lfWBcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gICAgc2NhbkRpcihwYWdlc0Rpcik7XG4gIH1cblxuICByZXR1cm4gZW50cmllcztcbn1cblxuLy8gXHUwNDI0XHUwNDQzXHUwNDNEXHUwNDNBXHUwNDQ2XHUwNDM4XHUwNDRGIFx1MDQzNFx1MDQzQlx1MDQ0RiBcdTA0M0ZcdTA0M0VcdTA0MzhcdTA0NDFcdTA0M0FcdTA0MzAgU0NTUyBcdTA0NDRcdTA0MzBcdTA0MzlcdTA0M0JcdTA0M0VcdTA0MzJcbmZ1bmN0aW9uIGdldFNDU1NFbnRyaWVzKCkge1xuICBjb25zdCBlbnRyaWVzID0ge307XG5cbiAgLy8gXHUwNDEzXHUwNDNCXHUwNDMwXHUwNDMyXHUwNDNEXHUwNDRCXHUwNDM5IFx1MDQ0NFx1MDQzMFx1MDQzOVx1MDQzQlxuICBpZiAoZXhpc3RzU3luYygnc3JjL3Njc3MvbWFpbi5zY3NzJykpIHtcbiAgICBlbnRyaWVzWydjc3MvbWFpbiddID0gcmVzb2x2ZShwcm9jZXNzLmN3ZCgpLCAnc3JjL3Njc3MvbWFpbi5zY3NzJyk7XG4gIH1cblxuICAvLyBcdTA0MjRcdTA0MzBcdTA0MzlcdTA0M0JcdTA0NEIgXHUwNDQxXHUwNDQyXHUwNDQwXHUwNDMwXHUwNDNEXHUwNDM4XHUwNDQ2XG4gIGNvbnN0IHBhZ2VzRGlyID0gJ3NyYy9zY3NzL3BhZ2VzJztcbiAgaWYgKGV4aXN0c1N5bmMocGFnZXNEaXIpKSB7XG4gICAgY29uc3Qgc2Nzc0ZpbGVzID0gcmVhZGRpclN5bmMocGFnZXNEaXIpLmZpbHRlcigoZmlsZSkgPT5cbiAgICAgIGZpbGUuZW5kc1dpdGgoJy5zY3NzJylcbiAgICApO1xuICAgIHNjc3NGaWxlcy5mb3JFYWNoKChmaWxlKSA9PiB7XG4gICAgICBjb25zdCBuYW1lID0gZmlsZS5yZXBsYWNlKCcuc2NzcycsICcnKTtcbiAgICAgIGVudHJpZXNbYGNzcy8ke25hbWV9YF0gPSByZXNvbHZlKHByb2Nlc3MuY3dkKCksIGAke3BhZ2VzRGlyfS8ke2ZpbGV9YCk7XG4gICAgfSk7XG4gIH1cblxuICBjb25zdCBsaWJzRGlyID0gJ3NyYy9zY3NzL2xpYnMnO1xuICBpZiAoZXhpc3RzU3luYyhsaWJzRGlyKSkge1xuICAgIGNvbnN0IGxpYkZpbGVzID0gcmVhZGRpclN5bmMobGlic0RpcikuZmlsdGVyKChmaWxlKSA9PlxuICAgICAgZmlsZS5lbmRzV2l0aCgnLnNjc3MnKVxuICAgICk7XG4gICAgbGliRmlsZXMuZm9yRWFjaCgoZmlsZSkgPT4ge1xuICAgICAgY29uc3QgbmFtZSA9IGZpbGUucmVwbGFjZSgnLnNjc3MnLCAnJyk7XG4gICAgICBlbnRyaWVzW2Bjc3MvbGlicy8ke25hbWV9YF0gPSByZXNvbHZlKFxuICAgICAgICBwcm9jZXNzLmN3ZCgpLFxuICAgICAgICBgJHtsaWJzRGlyfS8ke2ZpbGV9YFxuICAgICAgKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8vIFx1MDQxMVx1MDQzQlx1MDQzRVx1MDQzQVx1MDQzOFxuICBjb25zdCBibG9ja3NEaXIgPSAnc3JjL3Njc3MvYmxvY2tzJztcbiAgaWYgKGV4aXN0c1N5bmMoYmxvY2tzRGlyKSkge1xuICAgIGZ1bmN0aW9uIHNjYW5CbG9ja3NEaXIoZGlyLCBiYXNlRW50cnkgPSAnJykge1xuICAgICAgY29uc3QgaXRlbXMgPSByZWFkZGlyU3luYyhkaXIsIHsgd2l0aEZpbGVUeXBlczogdHJ1ZSB9KTtcbiAgICAgIGl0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgICAgaWYgKGl0ZW0uaXNEaXJlY3RvcnkoKSkge1xuICAgICAgICAgIHNjYW5CbG9ja3NEaXIoYCR7ZGlyfS8ke2l0ZW0ubmFtZX1gLCBgJHtiYXNlRW50cnl9JHtpdGVtLm5hbWV9L2ApO1xuICAgICAgICB9IGVsc2UgaWYgKGl0ZW0ubmFtZS5lbmRzV2l0aCgnLnNjc3MnKSkge1xuICAgICAgICAgIGNvbnN0IG5hbWUgPSBpdGVtLm5hbWUucmVwbGFjZSgnLnNjc3MnLCAnJyk7XG4gICAgICAgICAgY29uc3QgZW50cnlLZXkgPSBgY3NzL2Jsb2Nrcy8ke2Jhc2VFbnRyeX0ke25hbWV9YDtcbiAgICAgICAgICBjb25zdCBlbnRyeVBhdGggPSByZXNvbHZlKHByb2Nlc3MuY3dkKCksIGAke2Rpcn0vJHtpdGVtLm5hbWV9YCk7XG5cbiAgICAgICAgICBlbnRyaWVzW2VudHJ5S2V5XSA9IGVudHJ5UGF0aDtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICAgIHNjYW5CbG9ja3NEaXIoYmxvY2tzRGlyKTtcbiAgfVxuICByZXR1cm4gZW50cmllcztcbn1cblxuLy8gXHUwNDI0XHUwNDQzXHUwNDNEXHUwNDNBXHUwNDQ2XHUwNDM4XHUwNDRGIFx1MDQzNFx1MDQzQlx1MDQ0RiBcdTA0M0FcdTA0M0VcdTA0M0RcdTA0MzJcdTA0MzVcdTA0NDBcdTA0NDJcdTA0MzBcdTA0NDZcdTA0MzhcdTA0MzggXHUwNDQ4XHUwNDQwXHUwNDM4XHUwNDQ0XHUwNDQyXHUwNDNFXHUwNDMyIFx1MDQzOCBcdTA0MzhcdTA0MzdcdTA0M0VcdTA0MzFcdTA0NDBcdTA0MzBcdTA0MzZcdTA0MzVcdTA0M0RcdTA0MzhcdTA0MzlcbmZ1bmN0aW9uIGFzc2V0Q29udmVydGVyKCkge1xuICByZXR1cm4ge1xuICAgIG5hbWU6ICdhc3NldC1jb252ZXJ0ZXInLFxuICAgIGJ1aWxkU3RhcnQoKSB7XG4gICAgICAvLyBcdTA0MUFcdTA0M0VcdTA0M0RcdTA0MzJcdTA0MzVcdTA0NDBcdTA0NDJcdTA0MzBcdTA0NDZcdTA0MzhcdTA0NEYgXHUwNDQ4XHUwNDQwXHUwNDM4XHUwNDQ0XHUwNDQyXHUwNDNFXHUwNDMyXG4gICAgICBjb25zdCBmb250c0RpciA9ICdzcmMvZm9udHMnO1xuICAgICAgaWYgKGV4aXN0c1N5bmMoZm9udHNEaXIpKSB7XG4gICAgICAgIGNvbnN0IGZvbnRGaWxlcyA9IHJlYWRkaXJTeW5jKGZvbnRzRGlyLCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9KS5maWx0ZXIoXG4gICAgICAgICAgKGZpbGUpID0+XG4gICAgICAgICAgICB0eXBlb2YgZmlsZSA9PT0gJ3N0cmluZycgJiZcbiAgICAgICAgICAgIChmaWxlLmVuZHNXaXRoKCcudHRmJykgfHwgZmlsZS5lbmRzV2l0aCgnLm90ZicpKVxuICAgICAgICApO1xuXG4gICAgICAgIGlmIChmb250RmlsZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAgICAgYFx1RDgzRFx1REQwNCBDb252ZXJ0aW5nICR7Zm9udEZpbGVzLmxlbmd0aH0gZm9udChzKSBkdXJpbmcgYnVpbGQuLi5gXG4gICAgICAgICAgKTtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgZXhlY1N5bmMoJ25vZGUgc2NyaXB0cy9jb252ZXJ0LWZvbnRzLmpzJywgeyBzdGRpbzogJ2luaGVyaXQnIH0pO1xuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdGb250IGNvbnZlcnNpb24gZmFpbGVkOicsIGVycm9yLm1lc3NhZ2UpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBcdTA0MUFcdTA0M0VcdTA0M0RcdTA0MzJcdTA0MzVcdTA0NDBcdTA0NDJcdTA0MzBcdTA0NDZcdTA0MzhcdTA0NEYgXHUwNDM4XHUwNDM3XHUwNDNFXHUwNDMxXHUwNDQwXHUwNDMwXHUwNDM2XHUwNDM1XHUwNDNEXHUwNDM4XHUwNDM5XG4gICAgICBjb25zdCBpbWFnZXNEaXIgPSAnc3JjL2ltYWdlcyc7XG4gICAgICBpZiAoZXhpc3RzU3luYyhpbWFnZXNEaXIpKSB7XG4gICAgICAgIGNvbnN0IGltYWdlRmlsZXMgPSByZWFkZGlyU3luYyhpbWFnZXNEaXIsIHsgcmVjdXJzaXZlOiB0cnVlIH0pLmZpbHRlcihcbiAgICAgICAgICAoZmlsZSkgPT4ge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBmaWxlICE9PSAnc3RyaW5nJykgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgY29uc3QgZXh0ID0gZmlsZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgZXh0LmVuZHNXaXRoKCcuanBnJykgfHxcbiAgICAgICAgICAgICAgZXh0LmVuZHNXaXRoKCcuanBlZycpIHx8XG4gICAgICAgICAgICAgIGV4dC5lbmRzV2l0aCgnLnBuZycpIHx8XG4gICAgICAgICAgICAgIGV4dC5lbmRzV2l0aCgnLndlYnAnKSB8fFxuICAgICAgICAgICAgICBleHQuZW5kc1dpdGgoJy5naWYnKSB8fFxuICAgICAgICAgICAgICBleHQuZW5kc1dpdGgoJy5ibXAnKSB8fFxuICAgICAgICAgICAgICBleHQuZW5kc1dpdGgoJy50aWZmJylcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICApO1xuXG4gICAgICAgIGlmIChpbWFnZUZpbGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgIGBcdUQ4M0RcdUREQkNcdUZFMEYgIENvbnZlcnRpbmcgJHtpbWFnZUZpbGVzLmxlbmd0aH0gaW1hZ2UocykgZHVyaW5nIGJ1aWxkLi4uYFxuICAgICAgICAgICk7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGV4ZWNTeW5jKCdub2RlIHNjcmlwdHMvY29udmVydC1pbWFnZXMuanMnLCB7IHN0ZGlvOiAnaW5oZXJpdCcgfSk7XG4gICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ltYWdlIGNvbnZlcnNpb24gZmFpbGVkOicsIGVycm9yLm1lc3NhZ2UpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBcdTA0MUFcdTA0M0VcdTA0M0RcdTA0MzJcdTA0MzVcdTA0NDBcdTA0NDJcdTA0MzBcdTA0NDZcdTA0MzhcdTA0NEYgU1ZHIFx1MDQ0NFx1MDQzMFx1MDQzOVx1MDQzQlx1MDQzRVx1MDQzMlxuICAgICAgY29uc3Qgc3ZnRmlsZXMgPSByZWFkZGlyU3luYyhpbWFnZXNEaXIsIHsgcmVjdXJzaXZlOiB0cnVlIH0pLmZpbHRlcihcbiAgICAgICAgKGZpbGUpID0+IHtcbiAgICAgICAgICBpZiAodHlwZW9mIGZpbGUgIT09ICdzdHJpbmcnKSByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgcmV0dXJuIGZpbGUudG9Mb3dlckNhc2UoKS5lbmRzV2l0aCgnLnN2ZycpO1xuICAgICAgICB9XG4gICAgICApO1xuXG4gICAgICBpZiAoc3ZnRmlsZXMubGVuZ3RoID4gMCkge1xuICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICBgXHVEODNDXHVERkE4IENvbnZlcnRpbmcgJHtzdmdGaWxlcy5sZW5ndGh9IFNWRyBmaWxlKHMpIGR1cmluZyBidWlsZC4uLmBcbiAgICAgICAgKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBleGVjU3luYygnbm9kZSBzY3JpcHRzL2NvbnZlcnQtc3ZnLmpzJywgeyBzdGRpbzogJ2luaGVyaXQnIH0pO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1NWRyBjb252ZXJzaW9uIGZhaWxlZDonLCBlcnJvci5tZXNzYWdlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IGRlZmluZUNvbmZpZygoeyBjb21tYW5kLCBtb2RlIH0pID0+IHtcbiAgY29uc3QgaXNEZXYgPSBjb21tYW5kID09PSAnc2VydmUnIHx8IG1vZGUgPT09ICdkZXZlbG9wbWVudCc7XG5cbiAgcmV0dXJuIHtcbiAgICBwbHVnaW5zOiBbXG4gICAgICBwdWcoXG4gICAgICAgIHtcbiAgICAgICAgICBwcmV0dHk6IHRydWUsXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICB0aXRsZTogJ1ZpdGUgQXBwJyxcbiAgICAgICAgICBpc0RldjogaXNEZXYsXG4gICAgICAgIH1cbiAgICAgICksXG4gICAgICAvLyBcdTA0MUVcdTA0M0ZcdTA0NDJcdTA0MzhcdTA0M0NcdTA0MzhcdTA0MzdcdTA0MzBcdTA0NDZcdTA0MzhcdTA0NEYgXHUwNDM4XHUwNDM3XHUwNDNFXHUwNDMxXHUwNDQwXHUwNDMwXHUwNDM2XHUwNDM1XHUwNDNEXHUwNDM4XHUwNDM5IFx1MDQzMiBwcm9kdWN0aW9uXG4gICAgICAhaXNEZXYgJiZcbiAgICAgICAgVml0ZUltYWdlT3B0aW1pemVyKHtcbiAgICAgICAgICBqcGc6IHtcbiAgICAgICAgICAgIHF1YWxpdHk6IDkwLFxuICAgICAgICAgICAgcHJvZ3Jlc3NpdmU6IHRydWUsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBqcGVnOiB7XG4gICAgICAgICAgICBxdWFsaXR5OiA5MCxcbiAgICAgICAgICAgIHByb2dyZXNzaXZlOiB0cnVlLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgcG5nOiB7XG4gICAgICAgICAgICBxdWFsaXR5OiA5MCxcbiAgICAgICAgICAgIGNvbXByZXNzaW9uTGV2ZWw6IDksXG4gICAgICAgICAgfSxcbiAgICAgICAgICB3ZWJwOiB7XG4gICAgICAgICAgICBxdWFsaXR5OiA4NSxcbiAgICAgICAgICAgIGVmZm9ydDogNCxcbiAgICAgICAgICB9LFxuICAgICAgICAgIGF2aWY6IHtcbiAgICAgICAgICAgIHF1YWxpdHk6IDgwLFxuICAgICAgICAgICAgZWZmb3J0OiA0LFxuICAgICAgICAgIH0sXG4gICAgICAgICAgc3ZnOiB7XG4gICAgICAgICAgICBwbHVnaW5zOiBbXG4gICAgICAgICAgICAgIHsgbmFtZTogJ3JlbW92ZVZpZXdCb3gnLCBhY3RpdmU6IGZhbHNlIH0sXG4gICAgICAgICAgICAgIHsgbmFtZTogJ3JlbW92ZURpbWVuc2lvbnMnLCBhY3RpdmU6IHRydWUgfSxcbiAgICAgICAgICAgICAgeyBuYW1lOiAncmVtb3ZlQ29tbWVudHMnLCBhY3RpdmU6IHRydWUgfSxcbiAgICAgICAgICAgICAgeyBuYW1lOiAncmVtb3ZlVXNlbGVzc1N0cm9rZUFuZEZpbGwnLCBhY3RpdmU6IHRydWUgfSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgfSxcbiAgICAgICAgfSksXG4gICAgICAvLyBcdTA0MUFcdTA0MzBcdTA0NDFcdTA0NDJcdTA0M0VcdTA0M0NcdTA0M0RcdTA0NEJcdTA0MzkgXHUwNDNGXHUwNDNCXHUwNDMwXHUwNDMzXHUwNDM4XHUwNDNEIFx1MDQzNFx1MDQzQlx1MDQ0RiBcdTA0M0ZcdTA0MzVcdTA0NDBcdTA0MzVcdTA0M0NcdTA0MzVcdTA0NDlcdTA0MzVcdTA0M0RcdTA0MzhcdTA0NEYgSFRNTCBcdTA0NDRcdTA0MzBcdTA0MzlcdTA0M0JcdTA0M0VcdTA0MzIgXHUwNDMyIFx1MDQzQVx1MDQzRVx1MDQ0MFx1MDQzNVx1MDQzRFx1MDQ0QyBidWlsZFxuICAgICAge1xuICAgICAgICBuYW1lOiAnbW92ZS1odG1sLXRvLXJvb3QnLFxuICAgICAgICB3cml0ZUJ1bmRsZSgpIHtcbiAgICAgICAgICAvLyBcdTA0MUFcdTA0M0VcdTA0M0ZcdTA0MzhcdTA0NDBcdTA0NDNcdTA0MzVcdTA0M0MgSFRNTCBcdTA0NDRcdTA0MzBcdTA0MzlcdTA0M0JcdTA0NEIgXHUwNDM4XHUwNDM3IHNyYy9odG1sLyBcdTA0MzIgYnVpbGQvXG4gICAgICAgICAgY29uc3QgYnVpbGREaXIgPSAnYnVpbGQnO1xuICAgICAgICAgIGNvbnN0IGh0bWxEaXIgPSBgJHtidWlsZERpcn0vc3JjL2h0bWxgO1xuXG4gICAgICAgICAgaWYgKGV4aXN0c1N5bmMoaHRtbERpcikpIHtcbiAgICAgICAgICAgIGNvbnN0IGh0bWxGaWxlcyA9IHJlYWRkaXJTeW5jKGh0bWxEaXIpLmZpbHRlcigoZmlsZSkgPT5cbiAgICAgICAgICAgICAgZmlsZS5lbmRzV2l0aCgnLmh0bWwnKVxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgaHRtbEZpbGVzLmZvckVhY2goKGZpbGUpID0+IHtcbiAgICAgICAgICAgICAgY29uc3Qgc3JjUGF0aCA9IGAke2h0bWxEaXJ9LyR7ZmlsZX1gO1xuICAgICAgICAgICAgICBjb25zdCBkZXN0UGF0aCA9IGAke2J1aWxkRGlyfS8ke2ZpbGV9YDtcblxuICAgICAgICAgICAgICBjb3B5RmlsZVN5bmMoc3JjUGF0aCwgZGVzdFBhdGgpO1xuICAgICAgICAgICAgICB1bmxpbmtTeW5jKHNyY1BhdGgpOyAvLyBcdTA0MjNcdTA0MzRcdTA0MzBcdTA0M0JcdTA0NEZcdTA0MzVcdTA0M0MgXHUwNDM4XHUwNDM3IFx1MDQzOFx1MDQ0MVx1MDQ0NVx1MDQzRVx1MDQzNFx1MDQzRFx1MDQzRVx1MDQzM1x1MDQzRSBcdTA0M0NcdTA0MzVcdTA0NDFcdTA0NDJcdTA0MzBcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyBcdTA0MjNcdTA0MzRcdTA0MzBcdTA0M0JcdTA0NEZcdTA0MzVcdTA0M0MgXHUwNDNGXHUwNDQzXHUwNDQxXHUwNDQyXHUwNDRCXHUwNDM1IFx1MDQzNFx1MDQzOFx1MDQ0MFx1MDQzNVx1MDQzQVx1MDQ0Mlx1MDQzRVx1MDQ0MFx1MDQzOFx1MDQzOFxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgcm1TeW5jKGAke2J1aWxkRGlyfS9zcmMvaHRtbGAsIHsgcmVjdXJzaXZlOiB0cnVlLCBmb3JjZTogdHJ1ZSB9KTtcbiAgICAgICAgICAgICAgcm1TeW5jKGAke2J1aWxkRGlyfS9zcmNgLCB7IHJlY3Vyc2l2ZTogdHJ1ZSwgZm9yY2U6IHRydWUgfSk7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgIC8vIFx1MDQxOFx1MDQzM1x1MDQzRFx1MDQzRVx1MDQ0MFx1MDQzOFx1MDQ0MFx1MDQ0M1x1MDQzNVx1MDQzQyBcdTA0M0VcdTA0NDhcdTA0MzhcdTA0MzFcdTA0M0FcdTA0MzgsIFx1MDQzNVx1MDQ0MVx1MDQzQlx1MDQzOCBcdTA0MzRcdTA0MzhcdTA0NDBcdTA0MzVcdTA0M0FcdTA0NDJcdTA0M0VcdTA0NDBcdTA0MzhcdTA0MzggXHUwNDNEXHUwNDM1IFx1MDQzRlx1MDQ0M1x1MDQ0MVx1MDQ0Mlx1MDQ0Qlx1MDQzNVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgICAvLyBcdTA0MUZcdTA0M0JcdTA0MzBcdTA0MzNcdTA0MzhcdTA0M0QgXHUwNDM0XHUwNDNCXHUwNDRGIFx1MDQzRlx1MDQ0MFx1MDQzOFx1MDQzRFx1MDQ0M1x1MDQzNFx1MDQzOFx1MDQ0Mlx1MDQzNVx1MDQzQlx1MDQ0Q1x1MDQzRFx1MDQzRVx1MDQzM1x1MDQzRSBcdTA0NDFcdTA0M0VcdTA0NDVcdTA0NDBcdTA0MzBcdTA0M0RcdTA0MzVcdTA0M0RcdTA0MzhcdTA0NEYgQ1NTIFx1MDQzMVx1MDQzQlx1MDQzRVx1MDQzQVx1MDQzRVx1MDQzMlxuICAgICAge1xuICAgICAgICBuYW1lOiAncHJlc2VydmUtY3NzLWJsb2NrcycsXG4gICAgICAgIGdlbmVyYXRlQnVuZGxlKG9wdGlvbnMsIGJ1bmRsZSkge1xuICAgICAgICAgIGNvbnN0IHNjc3NFbnRyaWVzID0gZ2V0U0NTU0VudHJpZXMoKTtcblxuICAgICAgICAgIC8vIFx1MDQxRlx1MDQ0MFx1MDQzRVx1MDQzMlx1MDQzNVx1MDQ0MFx1MDQ0Rlx1MDQzNVx1MDQzQyBcdTA0NDdcdTA0NDJcdTA0M0UgXHUwNDMyXHUwNDQxXHUwNDM1IENTUyBcdTA0MzFcdTA0M0JcdTA0M0VcdTA0M0FcdTA0MzggXHUwNDQxXHUwNDNFXHUwNDM3XHUwNDM0XHUwNDMwXHUwNDNCXHUwNDM4XHUwNDQxXHUwNDRDXG4gICAgICAgICAgT2JqZWN0LmtleXMoc2Nzc0VudHJpZXMpLmZvckVhY2goKGVudHJ5S2V5KSA9PiB7XG4gICAgICAgICAgICBpZiAoZW50cnlLZXkuaW5jbHVkZXMoJ2Jsb2Nrcy8nKSkge1xuICAgICAgICAgICAgICBjb25zdCBleHBlY3RlZENzc05hbWUgPSBgJHtlbnRyeUtleX0uY3NzYDtcbiAgICAgICAgICAgICAgY29uc3QgaGFzQ29ycmVzcG9uZGluZ0NzcyA9IE9iamVjdC5rZXlzKGJ1bmRsZSkuc29tZShcbiAgICAgICAgICAgICAgICAoZmlsZU5hbWUpID0+XG4gICAgICAgICAgICAgICAgICBmaWxlTmFtZSA9PT0gZXhwZWN0ZWRDc3NOYW1lIHx8IGZpbGVOYW1lLmluY2x1ZGVzKGVudHJ5S2V5KVxuICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgIGlmICghaGFzQ29ycmVzcG9uZGluZ0Nzcykge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihgXHUyNkEwXHVGRTBGICBNaXNzaW5nIENTUyBmb3IgYmxvY2sgZW50cnk6ICR7ZW50cnlLZXl9YCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIC8vIFx1MDQyM1x1MDQzNFx1MDQzMFx1MDQzQlx1MDQ0Rlx1MDQzNVx1MDQzQyBcdTA0M0ZcdTA0NDNcdTA0NDFcdTA0NDJcdTA0NEJcdTA0MzUgSlMgXHUwNDQ0XHUwNDMwXHUwNDM5XHUwNDNCXHUwNDRCIFx1MDQzRVx1MDQ0MiBDU1MgZW50cmllc1xuICAgICAgICAgIE9iamVjdC5rZXlzKGJ1bmRsZSkuZm9yRWFjaCgoZmlsZU5hbWUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGZpbGUgPSBidW5kbGVbZmlsZU5hbWVdO1xuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICBmaWxlLnR5cGUgPT09ICdjaHVuaycgJiZcbiAgICAgICAgICAgICAgKGZpbGUuZmFjYWRlTW9kdWxlSWQ/LmVuZHNXaXRoKCcuc2NzcycpIHx8XG4gICAgICAgICAgICAgICAgZmlsZU5hbWUuaW5jbHVkZXMoJ2Nzcy9ibG9ja3MvJykgfHxcbiAgICAgICAgICAgICAgICAoZmlsZS5jb2RlICYmXG4gICAgICAgICAgICAgICAgICBmaWxlLmNvZGUudHJpbSgpLmxlbmd0aCA8IDEwMCAmJlxuICAgICAgICAgICAgICAgICAgKGZpbGUuY29kZS5pbmNsdWRlcygnaW1wb3J0JykgPT09IGZhbHNlIHx8IGZpbGUuY29kZSA9PT0gJycpKSlcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgXHVEODNEXHVEREQxXHVGRTBGICBSZW1vdmluZyBlbXB0eSBDU1MgSlMgZmlsZTogJHtmaWxlTmFtZX1gKTtcbiAgICAgICAgICAgICAgZGVsZXRlIGJ1bmRsZVtmaWxlTmFtZV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICAgLy8gYXNzZXRDb252ZXJ0ZXIoKSxcbiAgICAgIGNvbW1vbmpzKCksXG4gICAgXS5maWx0ZXIoQm9vbGVhbiksXG4gICAgY3NzOiB7XG4gICAgICBwcmVwcm9jZXNzb3JPcHRpb25zOiB7XG4gICAgICAgIHNjc3M6IHtcbiAgICAgICAgICBhcGk6ICdtb2Rlcm4tY29tcGlsZXInLFxuICAgICAgICAgIHNpbGVuY2VEZXByZWNhdGlvbnM6IFsnbGVnYWN5LWpzLWFwaSddLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIHBvc3Rjc3M6IHtcbiAgICAgICAgcGx1Z2luczogIWlzRGV2ICYmIFthdXRvcHJlZml4ZXIoKV0sXG4gICAgICB9LFxuICAgIH0sXG4gICAgYnVpbGQ6IHtcbiAgICAgIHRhcmdldDogJ2VzMjAxNScsXG4gICAgICBjc3NUYXJnZXQ6ICdjaHJvbWU4MCcsXG4gICAgICBvdXREaXI6ICdidWlsZCcsXG4gICAgICBzb3VyY2VtYXA6IGZhbHNlLFxuICAgICAgcm9sbHVwT3B0aW9uczoge1xuICAgICAgICBpbnB1dDoge1xuICAgICAgICAgIC4uLmdldEhUTUxQYWdlcygpLFxuICAgICAgICAgIC4uLmdldEpTRW50cmllcygpLFxuICAgICAgICAgIC4uLmdldFNDU1NFbnRyaWVzKCksXG4gICAgICAgIH0sXG4gICAgICAgIG91dHB1dDoge1xuICAgICAgICAgIGVudHJ5RmlsZU5hbWVzOiAoY2h1bmtJbmZvKSA9PiB7XG4gICAgICAgICAgICAvLyBcdTA0MjFcdTA0M0ZcdTA0MzVcdTA0NDZcdTA0MzhcdTA0MzBcdTA0M0JcdTA0NENcdTA0M0RcdTA0MzBcdTA0NEYgXHUwNDNFXHUwNDMxXHUwNDQwXHUwNDMwXHUwNDMxXHUwNDNFXHUwNDQyXHUwNDNBXHUwNDMwIFx1MDQzNFx1MDQzQlx1MDQ0RiBIVE1MIFx1MDQ0NFx1MDQzMFx1MDQzOVx1MDQzQlx1MDQzRVx1MDQzMiAtIFx1MDQzRlx1MDQ0MFx1MDQzOFx1MDQzRFx1MDQ0M1x1MDQzNFx1MDQzOFx1MDQ0Mlx1MDQzNVx1MDQzQlx1MDQ0Q1x1MDQzRFx1MDQzRSBcdTA0MzIgXHUwNDNBXHUwNDNFXHUwNDQwXHUwNDM1XHUwNDNEXHUwNDRDXG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgIGNodW5rSW5mby5pc0VudHJ5ICYmXG4gICAgICAgICAgICAgIGNodW5rSW5mby5mYWNhZGVNb2R1bGVJZD8uaW5jbHVkZXMoJy5odG1sJylcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICByZXR1cm4gJ1tuYW1lXS5odG1sJztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGNodW5rSW5mby5uYW1lLnN0YXJ0c1dpdGgoJ2pzLycpKSB7XG4gICAgICAgICAgICAgIHJldHVybiAnW25hbWVdLmpzJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFx1MDQxNFx1MDQ0MFx1MDQ0M1x1MDQzM1x1MDQzOFx1MDQzNSBlbnRyeSBwb2ludHNcbiAgICAgICAgICAgIHJldHVybiAnanMvW25hbWVdLmpzJztcbiAgICAgICAgICB9LFxuICAgICAgICAgIGNodW5rRmlsZU5hbWVzOiAnanMvW25hbWVdLVtoYXNoXS5qcycsXG4gICAgICAgICAgYXNzZXRGaWxlTmFtZXM6IChhc3NldEluZm8pID0+IHtcbiAgICAgICAgICAgIGlmIChhc3NldEluZm8ubmFtZT8uZW5kc1dpdGgoJy5jc3MnKSkge1xuICAgICAgICAgICAgICBjb25zdCBzY3NzRW50cmllcyA9IGdldFNDU1NFbnRyaWVzKCk7XG5cbiAgICAgICAgICAgICAgLy8gXHUwNDFEXHUwNDMwXHUwNDM5XHUwNDQyXHUwNDM4IFx1MDQzRlx1MDQzRVx1MDQzNFx1MDQ0NVx1MDQzRVx1MDQzNFx1MDQ0Rlx1MDQ0OVx1MDQzOFx1MDQzOSBlbnRyeSBcdTA0MzRcdTA0M0JcdTA0NEYgXHUwNDREXHUwNDQyXHUwNDNFXHUwNDMzXHUwNDNFIENTU1xuICAgICAgICAgICAgICBpZiAoYXNzZXRJbmZvLm9yaWdpbmFsRmlsZU5hbWVzKSB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBvcmlnaW5hbE5hbWUgb2YgYXNzZXRJbmZvLm9yaWdpbmFsRmlsZU5hbWVzKSB7XG4gICAgICAgICAgICAgICAgICBjb25zdCBub3JtYWxpemVkT3JpZyA9IG9yaWdpbmFsTmFtZS5yZXBsYWNlKC9cXFxcL2csICcvJyk7XG5cbiAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgW2VudHJ5S2V5LCBlbnRyeVBhdGhdIG9mIE9iamVjdC5lbnRyaWVzKFxuICAgICAgICAgICAgICAgICAgICBzY3NzRW50cmllc1xuICAgICAgICAgICAgICAgICAgKSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBub3JtYWxpemVkRW50cnkgPSBlbnRyeVBhdGgucmVwbGFjZSgvXFxcXC9nLCAnLycpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICBub3JtYWxpemVkT3JpZy5pbmNsdWRlcyhub3JtYWxpemVkRW50cnkpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgbm9ybWFsaXplZEVudHJ5LmluY2x1ZGVzKG5vcm1hbGl6ZWRPcmlnKVxuICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYCR7ZW50cnlLZXl9LmNzc2A7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAvLyBGYWxsYmFjayAtIFx1MDQzOFx1MDQ0OVx1MDQzNVx1MDQzQyBcdTA0M0ZcdTA0M0UgXHUwNDM4XHUwNDNDXHUwNDM1XHUwNDNEXHUwNDM4XG4gICAgICAgICAgICAgIGZvciAoY29uc3QgW2VudHJ5S2V5LCBlbnRyeVBhdGhdIG9mIE9iamVjdC5lbnRyaWVzKHNjc3NFbnRyaWVzKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGVudHJ5RmlsZU5hbWUgPSBlbnRyeUtleS5zcGxpdCgnLycpLnBvcCgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGFzc2V0RmlsZU5hbWUgPSBhc3NldEluZm8ubmFtZS5yZXBsYWNlKCcuY3NzJywgJycpO1xuXG4gICAgICAgICAgICAgICAgaWYgKGFzc2V0RmlsZU5hbWUgPT09IGVudHJ5RmlsZU5hbWUpIHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiBgJHtlbnRyeUtleX0uY3NzYDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAvLyBcdTA0MUZcdTA0M0VcdTA0NDFcdTA0M0JcdTA0MzVcdTA0MzRcdTA0M0RcdTA0MzhcdTA0MzkgZmFsbGJhY2tcbiAgICAgICAgICAgICAgY29uc3QgZmlsZU5hbWUgPSBhc3NldEluZm8ubmFtZVxuICAgICAgICAgICAgICAgIC5zcGxpdCgnLycpXG4gICAgICAgICAgICAgICAgLnBvcCgpXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoL1xcLlteLy5dKyQvLCAnJyk7XG4gICAgICAgICAgICAgIHJldHVybiBgY3NzLyR7ZmlsZU5hbWV9LmNzc2A7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gJ2Fzc2V0cy9bbmFtZV0tW2hhc2hdW2V4dG5hbWVdJztcbiAgICAgICAgICB9LFxuICAgICAgICAgIGdsb2JhbHM6IHtcbiAgICAgICAgICAgIC8vIFx1MDQxRVx1MDQzRlx1MDQ0MFx1MDQzNVx1MDQzNFx1MDQzNVx1MDQzQlx1MDQ0Rlx1MDQzNVx1MDQzQyBcdTA0MzNcdTA0M0JcdTA0M0VcdTA0MzFcdTA0MzBcdTA0M0JcdTA0NENcdTA0M0RcdTA0NEJcdTA0MzUgXHUwNDNGXHUwNDM1XHUwNDQwXHUwNDM1XHUwNDNDXHUwNDM1XHUwNDNEXHUwNDNEXHUwNDRCXHUwNDM1IFx1MDQzNFx1MDQzQlx1MDQ0RiBcdTA0MzhcdTA0MzdcdTA0MzFcdTA0MzVcdTA0MzZcdTA0MzBcdTA0M0RcdTA0MzhcdTA0NEYgXHUwNDNBXHUwNDNFXHUwNDNEXHUwNDQ0XHUwNDNCXHUwNDM4XHUwNDNBXHUwNDQyXHUwNDNFXHUwNDMyXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgICBtaW5pZnk6ICd0ZXJzZXInLFxuICAgICAgdGVyc2VyT3B0aW9uczoge1xuICAgICAgICBjb21wcmVzczoge1xuICAgICAgICAgIGRyb3BfY29uc29sZTogdHJ1ZSxcbiAgICAgICAgICBkcm9wX2RlYnVnZ2VyOiB0cnVlLFxuICAgICAgICAgIHB1cmVfZnVuY3M6IFsnY29uc29sZS5sb2cnLCAnY29uc29sZS5pbmZvJywgJ2NvbnNvbGUuZGVidWcnXSxcbiAgICAgICAgfSxcbiAgICAgICAgbWFuZ2xlOiB7XG4gICAgICAgICAgLy8gXHUwNDExXHUwNDM1XHUwNDM3XHUwNDNFXHUwNDNGXHUwNDMwXHUwNDQxXHUwNDNEXHUwNDRCXHUwNDM5IG1hbmdsaW5nIFx1MDQzNFx1MDQzQlx1MDQ0RiBcdTA0MzhcdTA0MzdcdTA0MzFcdTA0MzVcdTA0MzZcdTA0MzBcdTA0M0RcdTA0MzhcdTA0NEYgXHUwNDNBXHUwNDNFXHUwNDNEXHUwNDQ0XHUwNDNCXHUwNDM4XHUwNDNBXHUwNDQyXHUwNDNFXHUwNDMyXG4gICAgICAgICAgcmVzZXJ2ZWQ6IFsnJCcsICdqUXVlcnknLCAnd2luZG93JywgJ2RvY3VtZW50J10sXG4gICAgICAgICAgcHJvcGVydGllczogZmFsc2UsXG4gICAgICAgIH0sXG4gICAgICAgIGZvcm1hdDoge1xuICAgICAgICAgIGNvbW1lbnRzOiBmYWxzZSxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgfSxcbiAgICBzZXJ2ZXI6IHtcbiAgICAgIHBvcnQ6IDMwMDAsXG4gICAgICBvcGVuOiB0cnVlLFxuICAgIH0sXG4gIH07XG59KTtcbiJdLAogICJtYXBwaW5ncyI6ICI7QUFBNlMsU0FBUyxvQkFBb0I7QUFDMVUsT0FBTyxTQUFTO0FBQ2hCLE9BQU8sa0JBQWtCO0FBQ3pCLFNBQVMsMEJBQTBCO0FBQ25DLFNBQVMsZUFBZTtBQUN4QixTQUFTLGFBQWEsWUFBWSxjQUFj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ZUFBZTtBQUduQyxrQkFBSSxVQUFVLG1CQUFtQjtBQUMvQiwyQkFBVyxnQkFBZ0IsVUFBVSxtQkFBbUI7QUFDdEQsd0JBQU0saUJBQWlCLGFBQWEsUUFBUSxPQUFPLEdBQUc7QUFFdEQsNkJBQVcsQ0FBQyxVQUFVLFNBQVMsS0FBSyxPQUFPO0FBQUEsb0JBQ3pDO0FBQUEsa0JBQ0YsR0FBRztBQUNELDBCQUFNLGtCQUFrQixVQUFVLFFBQVEsT0FBTyxHQUFHO0FBRXBELHdCQUNFLGVBQWUsU0FBUyxlQUFlLEtBQ3ZDLGdCQUFnQixTQUFTLGNBQWMsR0FDdkM7QUFDQSw2QkFBTyxHQUFHLFFBQVE7QUFBQSxvQkFDcEI7QUFBQSxrQkFDRjtBQUFBLGdCQUNGO0FBQUEsY0FDRjtBQUdBLHlCQUFXLENBQUMsVUFBVSxTQUFTLEtBQUssT0FBTyxRQUFRLFdBQVcsR0FBRztBQUMvRCxzQkFBTSxnQkFBZ0IsU0FBUyxNQUFNLEdBQUcsRUFBRSxJQUFJO0FBQzlDLHNCQUFNLGdCQUFnQixVQUFVLEtBQUssUUFBUSxRQUFRLEVBQUU7QUFFdkQsb0JBQUksa0JBQWtCLGVBQWU7QUFDbkMseUJBQU8sR0FBRyxRQUFRO0FBQUEsZ0JBQ3BCO0FBQUEsY0FDRjtBQUdBLG9CQUFNLFdBQVcsVUFBVSxLQUN4QixNQUFNLEdBQUcsRUFDVCxJQUFJLEVBQ0osUUFBUSxhQUFhLEVBQUU7QUFDMUIscUJBQU8sT0FBTyxRQUFRO0FBQUEsWUFDeEI7QUFDQSxtQkFBTztBQUFBLFVBQ1Q7QUFBQSxVQUNBLFNBQVM7QUFBQTtBQUFBLFVBRVQ7QUFBQSxRQUNGO0FBQUEsTUFDRjtBQUFBLE1BQ0EsUUFBUTtBQUFBLE1BQ1IsZUFBZTtBQUFBLFFBQ2IsVUFBVTtBQUFBLFVBQ1IsY0FBYztBQUFBLFVBQ2QsZUFBZTtBQUFBLFVBQ2YsWUFBWSxDQUFDLGVBQWUsZ0JBQWdCLGVBQWU7QUFBQSxRQUM3RDtBQUFBLFFBQ0EsUUFBUTtBQUFBO0FBQUEsVUFFTixVQUFVLENBQUMsS0FBSyxVQUFVLFVBQVUsVUFBVTtBQUFBLFVBQzlDLFlBQVk7QUFBQSxRQUNkO0FBQUEsUUFDQSxRQUFRO0FBQUEsVUFDTixVQUFVO0FBQUEsUUFDWjtBQUFBLE1BQ0Y7QUFBQSxJQUNGO0FBQUEsSUFDQSxRQUFRO0FBQUEsTUFDTixNQUFNO0FBQUEsTUFDTixNQUFNO0FBQUEsSUFDUjtBQUFBLEVBQ0Y7QUFDRixDQUFDOyIsCiAgIm5hbWVzIjogW10KfQo=
